<en>
    <unsupported></unsupported>
</en>
<ko>
    <sidebar></sidebar>
    <h1 class="title">1. 생성자 DI에서의 순환 참조</h1>
    <p><i>Smoodi Framework</i> 는 IoC 컨테이너를 기반 개발 환경을 제공하는 WAS 프레임워크입니다. 객체 간의 의존성은 생성자 DI로 관리합니다.</p>
    <p>만약 객체 중에 순환 참조가 존재한다면 객체 초기화가 불가능하게 됩니다.</p>
    <ol>
        <li>예를 들어, <code>A -> B -> C -> A</code>의 참조열이 있다고 하면,</li>
        <li><code>A</code>의 초기화에는 <code>B</code>가, <code>B</code>의 초기화에는 <code>C</code>가, <code>C</code>의 초기화에는
            <code>A</code>가 필요합나다.
        </li>
        <li>정리하면, <code>A</code>를 인스턴스화하기 위해 <code>A</code> 인스턴스가 필요한 꼴입니다.</li>
    </ol>

    <h1 class="title">2. 해결 방안</h1>
    <p>물론 이 모순을 완화를 방법은 있습니다. 프록시 객체를 통해, 혹은 의존 변수를 가변으로 관리해 지연 초기화를 구현할 수 있습니다.</p>
    <ol>
        <li>하지만 프록시 객체는 문법적으로 상속을 허용해야 하며,</li>
        <li>가변 의존성 변수는 설계적으로 불안정하다고 생각합니다. 그렇기에 Smoodi 는 기본적으로 모든 객체를 불변이라 가정하고 관리합니다. 보다 높은 안정성을 위함입니다.</li>
        <li>또한 Smoodi 가 지향하는 설계는 일방향 의존성이며, 순환을 허용하지 않습니다.</li>
    </ol>
    <p>위 세 개 이유에 따라 순환 참조를 구현하지 않으려 합니다. 대신 이 순환 참조를 탐지하고 알리기 위한 로직을 작성하겠습니다.</p>
    <h1 class="title">3. 요구사항 분석</h1>
    <h2 class="title">객체 간의 순환 참조를 탐색합니다.</h2>
    <ol>
        <li>각 객체는 다른 객체와 통신하기 위해 의존하는 의존성을 지니고 있습니다. 이 의존성은 단방향이며, 여러 개 존재할 수 있습니다.<br>
            그래프로 치환하면, 객체를 정점, 의존성을 단방향 간선,
            순환 참조는 사이클에 해당합니다. <strong>단방향 그래프 사이클 탐색 문제</strong>입니다.
        </li>
        <li>모든 객체들이 서로 이어져있는 것이 아니므로 여러 그래프가 존재할 것을 염두에 두어야 합니다.<br>
            다른 객체를 향하거나 자신에게 향하는 의존성 하나도 없어 외부와 독립되어 있는 객체가 있을 수 있으며, 그래프 덩어리의 경우에서도 이런 상황이 존재할 수도 있습니다.<br>
            즉, 여러 그래프가 존재할 가능성이 있습니다.
        </li>
    </ol>
    <h2 class="title">사용자에게 순환 참조가 어떻게 구성되어있는지 정확히 보여주어야 합니다.</h2>
    <p>단순히 특정 객체에 순환 참조 의존성이 존재한다가 아닌, 상세한 참조열은 출력해야 합니다.</p>
    <h1 class="title">4. 해결 과정</h1>
    <h2 class="title">상세 알고리즘 선택</h2>
    <p>참조'열'을 탐색해야 하므로, 사이클이 구성된 간선을 일렬로 탐색하도록 구성해야 합니다.</p>
    <p><strong>VFS</strong>보다는 <strong>DFS, Depth First Search</strong>가 적합해 보입니다.</p>
    <p>간선이 복잡하게 얽혀 있어 일반 함수와 반복문으로 구현하기엔 너무 복잡할 것 같습니다. <strong>재귀 함수를 이용한 DFS</strong>로 구현하겠습니다.</p>
    <h2 class="title">기존의 객체 생성 로직</h2>
    <p>아주 간단한 논리로 동작합니다.</p>
    <ol>
        <li>각 객체의 생성자를 추출해내어 <code>Collection</code>으로 저장해둡니다.</li>
        <li>반복 순회하며 생성자 매개변수의 타입을 확인하고, IoC 컨테이너에 존재하는 객체의 타입일 경우 해당 생성자를 초기화합니다.<br>
            이 경우, IoC 컨테이너에 생성된 객체를 저장합니다.
        </li>
        <li>만약 아니라면 일단 건너뜁니다. 다음에 다시 도달했을 때엔 매개변수 타입의 객체가 모두 있을 수도 있습니다.</li>
        <li>다수의 그래프일 경우에 대한 대비는 아래 제시된 코드 바깥에서 수행하며, 해당 문제에서는 그다지 중요하지 않으므로 추가적으로 언급하지 않겠습니다.</li>
    </ol>
    <quote>
        아래 코드는 읽어볼 필요까진 없습니다. 바로 밑에 이해를 돕기 위한 예시 상황을 들어 한 번 더 설명합니다.
    </quote>
</ko>